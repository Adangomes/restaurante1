backend:
  name: git-gateway
  branch: main

media_folder: "imagens"
public_folder: "/imagens"

collections:
  - name: "cardapio"
    label: "Cardápio Completo"
    files:
      - file: "content/produtos.json"
        label: "Categorias de Produtos"
        name: "produtos_config"
        fields:
          - label: "Lista Geral de Produtos"
            name: "produtos"
            widget: "list"
            summary: '{{title}} ({{categoria}})'
            fields:
              # --- IDENTIFICAÇÃO ---
              - { label: "Nome do Produto", name: "title", widget: "string" }
              - { label: "Categoria Principal", name: "categoria", widget: "string", hint: "Ex: burger, batata, pizza" }
              - { label: "Ingredientes/Descrição", name: "ingredientes", widget: "text", required: false }
              - { label: "Imagem", name: "image", widget: "image", required: false }

              # --- O PULO DO GATO: COMPORTAMENTO DINÂMICO ---
              - label: "Ação ao Clicar"
                name: "tipo_escolha"
                widget: "select"
                default: "direto"
                options:
                  - { label: "Adicionar Direto ao Carrinho", value: "direto" }
                  - { label: "Abrir Modal de Sabores/Opções", value: "abrir_modal" }
              
              - label: "Chave/Tag de Grupo"
                name: "tag_grupo"
                widget: "string"
                required: false
                hint: "Use para agrupar. Ex: Se este for o botão 'Batata 600g', coloque a tag 'batata_600'. Nos sabores de 600g, coloque a mesma tag na 'Categoria'."

              - label: "Habilitar Adicionais/Bordas?"
                name: "tem_adicionais"
                widget: "boolean"
                default: false
                hint: "Se marcado, o modal exibirá a seleção de bordas/extras."

              # --- PREÇOS ---
              - { label: "Preço Único (Lanches/Bebidas)", name: "price", widget: "number", value_type: "float", required: false }
              - { label: "Preço Antigo (Promoção)", name: "oldPrice", widget: "number", value_type: "float", required: false }
              
              - label: "Preços por Tamanho (Se aplicável)"
                name: "prices"
                widget: "object"
                required: false
                fields:
                  - { label: "Pequena / 600g", name: "P", widget: "number", value_type: "float", required: false }
                  - { label: "Média (Pizza)", name: "M", widget: "number", value_type: "float", required: false }
                  - { label: "Grande / 1kg", name: "G", widget: "number", value_type: "float", required: false }

  - name: "configuracoes"
    label: "Configurações da Loja"
    files:
      - file: "content/status.json"
        label: "Status e Horários"
        name: "status_loja"
        fields:
          - { label: "Hora de Abertura", name: "horaAbre", widget: "string", default: "18:00" }
          - { label: "Hora de Fechamento", name: "horaFecha", widget: "string", default: "23:30" }
          - label: "Dias de Funcionamento"
            name: "diasFuncionamento"
            widget: "select"
            multiple: true
            options:
              - { label: "Domingo", value: "0" }
              - { label: "Segunda", value: "1" }
              - { label: "Terça", value: "2" }
              - { label: "Quarta", value: "3" }
              - { label: "Quinta", value: "4" }
              - { label: "Sexta", value: "5" }
              - { label: "Sábado", value: "6" }

# --- NOVA FUNÇÃO DE CUPOM ---
      - file: "content/aplicardesconto.json"
        label: "Cupons de Desconto"
        name: "cupons_desconto"
        fields:
          - label: "Lista de Cupons"
            name: "cupons"
            widget: "list"
            fields:
              - { label: "Código do Cupom", name: "codigo", widget: "string", hint: "Ex: BEMVINDO10" }
              - label: "Tipo de Desconto"
                name: "tipo"
                widget: "select"
                options:
                  - { label: "Porcentagem (%)", value: "porcentagem" }
                  - { label: "Valor Fixo (R$)", value: "fixo" }
              - { label: "Valor do Desconto", name: "valor", widget: "number", value_type: "float" }
              - { label: "Ativo?", name: "ativo", widget: "boolean", default: true }
